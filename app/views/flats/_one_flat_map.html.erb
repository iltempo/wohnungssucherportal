<div id="map">
  <script type="text/javascript">
    function initialize() {
      
      // set up new map
      var mapOptions = {
        zoom: 13,
        mapTypeId: google.maps.MapTypeId.ROADMAP
      };  
      map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

      var geocoder = new google.maps.Geocoder();

      centerMap(map, geocoder);
      addReferencePoints(map, geocoder, ["<%= amazon_muenchen %>"]);
      
      var address = '<%= flat.full_address %>';
      
        var markerOptions = {
          'position': new google.maps.LatLng(<%= flat.latitude %>, <%= flat.longitude %>),
          'title': address,
          'map': map
        };
        var marker = new google.maps.Marker(markerOptions);

      /*
      directions = new GDirections(map);
      var betterplaceOfficeString = '<%= betterplace_office_address %>';
      directions.load(
        "from: " +  addressString + " to: " + betterplaceOfficeString,
        {'travelMode': "G_TRAVEL_MODE_WALKING", 'locale': 'de_DE'}
      );
      setTimeout("alert(directions.getDistance().meters)", 5000);
      */
    }
    
    </script>
    
  <body onload="initialize()">
    <div id="map_canvas" style="width: 800px; height: 600px; border: 1px solid #000"></div>
</div>